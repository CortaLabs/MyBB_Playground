# Installation Guide

This guide walks you through setting up the MyBB Playground development environment on your local machine.

## Prerequisites

Before you begin, ensure your system meets these requirements:

- **Python 3.10 or higher** - Required for the MCP server
- **PHP 8.0 or higher** - For running MyBB locally (installed by setup script)
- **MariaDB** - Database backend for MyBB (installed by setup script)
- **Claude Code** - With Model Context Protocol (MCP) support enabled
- **Git** - For cloning the repository

The automated setup script (`setup_dev_env.sh`) will handle PHP 8.0+ and MariaDB installation for you.

## Installation Steps

### 1. Clone the Repository

```bash
git clone <repository-url>
cd MyBB_Playground
```

### 2. Run Automated Setup

The setup script installs all dependencies and configures the environment:

```bash
./setup_dev_env.sh
```

This script will:
- Install PHP 8.0+ if not already present
- Install and configure MariaDB
- Create the MyBB database and user
- Set up Python virtual environment
- Install MCP server dependencies
- Generate `.env` configuration file

### 3. Configure Environment Variables

After setup completes, verify your `.env` file in the project root. The setup script creates this automatically with these defaults:

```bash
# Database Configuration
MYBB_DB_HOST=localhost
MYBB_DB_PORT=3306
MYBB_DB_NAME=mybb_dev
MYBB_DB_USER=mybb_user
MYBB_DB_PASS=<generated-password>
MYBB_DB_PREFIX=mybb_

# Database Pool Settings
MYBB_DB_POOL_SIZE=5
MYBB_DB_POOL_NAME=mybb_pool

# MyBB Installation
MYBB_ROOT=/home/austin/projects/MyBB_Playground/TestForum
MYBB_URL=http://localhost:8022
MYBB_PORT=8022
```

**Important Configuration Notes:**

- **MYBB_DB_PASS** - Database password (required). Generated by setup script.
- **MYBB_ROOT** - Absolute path to your MyBB installation. Defaults to `TestForum/` in project root.
- **MYBB_URL** - URL where MyBB will be accessible. Default: `http://localhost:8022`
- **MYBB_PORT** - Port for the local PHP server. Default: `8022`
- **MYBB_DB_PREFIX** - Database table prefix. Default: `mybb_`
- **MYBB_DB_POOL_SIZE** - Connection pool size. Default: `5`

All these variables are loaded by `mybb_mcp/mybb_mcp/config.py` at runtime.

### 4. Start the MyBB Server

Launch the local development server:

```bash
./start_mybb.sh
```

This starts PHP's built-in server on port 8022. You can access MyBB at `http://localhost:8022`.

### 5. Configure MCP Server in Claude Code

The MCP server is configured at **local scope** for this project. To activate it:

1. Ensure Claude Code is installed with MCP support
2. Restart Claude Code to load the local MCP configuration
3. The server configuration is read from the project's MCP settings file

### 6. Verify Installation

Test that everything is working:

#### Test MCP Connection

In Claude Code, run:

```bash
claude mcp get mybb
```

Expected output:
```
Status: âœ“ Connected
```

#### Test Database Connection

From the project root:

```bash
cd mybb_mcp
source .venv/bin/activate
python -c "from mybb_mcp.config import load_config; from mybb_mcp.db import MyBBDatabase; db = MyBBDatabase(load_config().db); print(db.list_template_sets())"
```

This should print a list of MyBB template sets without errors.

#### Test in Claude Code

Try these commands in Claude Code:

```
"List MyBB template sets"
"Show me the header template"
"List all available plugins"
```

If these commands return valid responses, your installation is complete!

## Troubleshooting

### MCP Server Not Connecting

- Verify `.env` file exists in project root
- Check that `MYBB_DB_PASS` is set (required)
- Restart Claude Code to reload MCP configuration
- Check MCP server logs for connection errors

### Database Connection Errors

- Verify MariaDB is running: `sudo systemctl status mariadb`
- Check database credentials in `.env`
- Ensure database `mybb_dev` exists
- Verify user `mybb_user` has correct permissions

### MyBB Server Won't Start

- Check if port 8022 is already in use: `lsof -i :8022`
- Verify PHP 8.0+ is installed: `php --version`
- Check `MYBB_ROOT` points to valid MyBB installation

### Configuration Errors

If you see `ConfigurationError: Database password is required`:

- Ensure `MYBB_DB_PASS` is set in `.env`
- The variable cannot be empty or missing
- No default password is provided for security reasons

## Next Steps

Once installation is complete:

1. **[Complete the Quickstart Tutorial](quickstart.md)** - Learn basic operations
2. **[Explore MCP Tools](../mcp_tools/index.md)** - See all available commands
3. **[Read Best Practices](../best_practices/index.md)** - Learn development conventions

## Manual Configuration (Advanced)

If you need to manually edit the `.env` file or set up without the automated script, ensure all variables listed in the Configuration section are properly set. The MCP server will fail to start if `MYBB_DB_PASS` is missing.

For advanced configuration options and database pool tuning, see the [Architecture Documentation](../architecture/index.md).
